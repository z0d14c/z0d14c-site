---
import Layout from '@layouts/Default.astro';
import { resume } from '@data/resume';

const abridged = resume.map((section) => ({
  title: section.title,
  lines: section.lines.filter((l) => l.critical),
}));
---

<Layout title='Resume' pageTitle='Resume' description='Thomas Augustus Grice Resume'>
  <main class='bg-yellow p-6'>
    <h2 class='text-3xl md:text-5xl dm-serif'>Resume</h2>
    <p class='poppins mt-2'>Below you can switch between a short overview and a detailed resume.</p>
    <div class='my-4'>
      <button id='resumeToggle' class='border-2 border-black px-4 py-2 bg-white card-shadow'>Show detailed resume</button>
    </div>
    <section id='abridged'>
      {abridged.map((section) => (
        <div class='mb-4'>
          <h3 class='text-2xl dm-serif'>{section.title}</h3>
          <ul class='poppins list-disc ml-4'>
            {section.lines.map((line) => (
              <li>{line.text}</li>
            ))}
          </ul>
        </div>
      ))}
    </section>
    <section id='detailed' style='display:none;'>
      {resume.map((section) => (
        <div class='mb-4'>
          <h3 class='text-2xl dm-serif'>{section.title}</h3>
          <ul class='poppins list-disc ml-4'>
            {section.lines.map((line) => (
              <li>{line.text}</li>
            ))}
          </ul>
        </div>
      ))}
    </section>
  </main>
  <script>
    const btn = document.getElementById('resumeToggle');
    const abr = document.getElementById('abridged');
    const det = document.getElementById('detailed');
    btn?.addEventListener('click', () => {
      if (det.style.display === 'none') {
        det.style.display = 'block';
        abr.style.display = 'none';
        btn.textContent = 'Show abridged resume';
      } else {
        det.style.display = 'none';
        abr.style.display = 'block';
        btn.textContent = 'Show detailed resume';
      }
    });
  </script>
</Layout>
